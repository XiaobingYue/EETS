<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yxb.user.dao.UserDao">
	<select id="loginUser" resultType="user">
		select id , username , password , email
			from user
			where username = #{username} and password = #{password}
	</select>

	<insert id="registUser">
		insert into user (
			username , password , email
		) values (
			#{username} , #{password} , #{email})
	</insert>
	
	<select id="getPermissionsByUserId" resultType="permission">
	 select
            *
        from permission
        where id in (
            select
                permissionid
            from role_permission
            where roleid in (
                select 
                    roleid
                from user_role
                where userid = #{id }
            )
        )
	</select>
</mapper>